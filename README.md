Лабораторная работа №4
"Системный таймер"

К теме: Системный CMOS. Часы реального времени. Системный таймер. Динамик. Управление питанием и энергопотреблением. Спящий режим. Подсистема ACPI.

ЦЕЛЬ РАБОТЫ
Получить навыки программирования и изучить возможности использования системного таймера 8254.
Продолжительность работы - 4 часа.

ЗАДАНИЕ
Под MS DOS написать программу, которая:
1) c помощью системного таймера генерирует звук заданной частоты (по вариантам);
2) выводит слово состояния для каждого канала в двоичном виде;
3) определяет коэффициент деления для каждого канала в 16-ричном виде.
*Реализовать генератор случайных чисел от нуля до заданного с клавиатуры числа.

ТЕОРЕТИЧЕСКИЕ СВЕДЕНИЯ
Системный таймер - устройство, подключенное к линии запроса IRQ0 и вырабатывающее прерывание int8h. Таймер реализуется на  микросхеме Intel 8253 или 8254 (Отечественные аналоги: К1810ВИ53 и К1810ВИ54). 
Таймер состоит из трёх независимых каналов: 0 - отсчитывает текущее время после включения компьютера, 1- для работы с контроллером прямого доступа к памяти, 2 - связан с системным динамиком.
Каждый канал содержит регистры: 
	состояния канала RS (8 разрядов); 
	управляющего слова RSW (8 разрядов); 
	буферный регистр OL (16 разрядов); 
	регистр счетчика CE (16 разрядов); 
	регистр констант пересчета CR (16 разрядов)
 
Каналы таймера подключаются к внешним устройствам при помощи линий: 
	GATE - управляющий вход; 
	CLOCK - вход тактовой частоты; 
	OUT - выход таймера.
Регистр счетчика CE работает в режиме вычитания. Его содержимое уменьшается по спаду сигнала CLOCK при условии, что на вход GATE установлен уровень логической 1. 
В зависимости от режима работы таймера при достижении счетчиком CE нуля тем или иным образом изменяется выходной сигнал OUT. 
Буферный регистр OL предназначен для запоминания текущего содержимого регистра счетчика CE без остановки процесса счета. После запоминания буферный регистр доступен программе для чтения. 
Регистр констант пересчета CR может загружаться в регистр счетчика, если это требуется в текущем режиме работы таймера. 

Возможны шесть режимов работы таймера, которые делятся на три типа: 
Режимы 0, 4 - однократное выполнение функций. 
Режимы 1, 5 - работа с перезапуском. 
Режимы 2, 3 - работа с автозагрузкой.

Для подключения динамика используется порт 61h. 
 
